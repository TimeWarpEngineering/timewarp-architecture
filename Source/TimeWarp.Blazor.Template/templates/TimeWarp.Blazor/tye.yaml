# tye application configuration file
# read all about it at https://github.com/dotnet/tye
#
# when you've given us a try, we'd love to know what you think:
#    https://aka.ms/AA7q20u
#
name: timewarp.blazor
services:
#- name: cosmosdb
#  image: mcr.microsoft.com/cosmosdb/linux/azure-cosmos-emulator
#  bindings:
#  - port: 8081
#    name: cosmosdb-ui
#    protocol: https
#  - port: 8900
#    name: cosmosdb-8900
#  - port: 8901
#    name: cosmosdb-8901
#  - port: 8979   
#    name: cosmosdb-8979
#  - port: 10250
#    name: cosmosdb-10250
#  - port: 10251
#    name: cosmosdb-10251
#  - port: 10252
#    name: cosmosdb-10252
#  - port: 10253
#    name: cosmosdb-10253
#  - port: 10254
#    name: cosmosdb-10254
#  - port: 10350
#    name: cosmosdb-10350

    
- name: timewarp-blazor-server
  project: Source/Server/TimeWarp.Blazor.Server.csproj
  bindings:
  - port: 5001
    protocol: https

- name: timewarp-blazor-grpcserver
  project: Source/GrpcServer/TimeWarp.Architecture.GrpcServer.csproj
  bindings:
  - name: https-grpc
    port: 7227
    protocol: https
  - name: http-grpc
    port: 5290
    protocol: http

- name: timewarp-blazor-apiserver
  project: Source/ApiServer/TimeWarp.Architecture.ApiServer.csproj
  bindings:
  - port: 7255
    protocol: https

- name: proxy
  project: Source/Proxy/Proxy.csproj
  bindings:
  - port: 8443
    protocol: https

#- name: timewarp-blazor-client
#  project: Source/Client/TimeWarp.Blazor.Client.csproj
#- name: endtoend-playwright-tests
#  project: Tests/EndToEnd.Playwright.Tests/EndToEnd.Playwright.Tests.csproj

#ingress:
#  - name: ingress
#    bindings:
#    - port: 443
#      protocol: https
#    rules:
#      - path: /api
#        service: timewarp-blazor-server
#      - path: /swagger
#        preservePath: true
#        service: timewarp-blazor-server
#      - service: client
